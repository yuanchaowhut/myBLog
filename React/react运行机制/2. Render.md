<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [组件挂载](#%E7%BB%84%E4%BB%B6%E6%8C%82%E8%BD%BD)
  - [ReactRoot创建](#reactroot%E5%88%9B%E5%BB%BA)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# 组件挂载
```
ReactDOM.render(<App />, document.getElementById('root'));
```

>node_modules/react-dom/cjs/react-dom.development.js


## ReactRoot创建
ReactDOM.render
```
var ReactDOM = {
      render: function (element, container, callback) {
        return legacyRenderSubtreeIntoContainer(null, element, container, false, callback);
      }
}

function legacyRenderSubtreeIntoContainer(parentComponent, children, container, forceHydrate, callback) {
    //...
    root = container._reactRootContainer = legacyCreateRootFromDOMContainer(container, forceHydrate)
    //...
    root.render(children, callback)
    //...
}

function legacyCreateRootFromDOMContainer(container, forceHydrate) {
    //...
    return new ReactRoot(container, isConcurrent, shouldHydrate);
    //... 
}

```

ReactRoot
```
function ReactRoot(container, isConcurrent, hydrate) {
    var root = createContainer(container, isConcurrent, hydrate);
    this._internalRoot = root;
}
ReactRoot.prototype.render = function (children, callback) {};
ReactRoot.prototype.unmount = function (callback) {};
ReactRoot.prototype.legacy_renderSubtreeIntoContainer = function (parentComponent, children, callback) {};
ReactRoot.prototype.createBatch = function () {};
```
 
createContainer => createFiberRoot => createHostRootFiber => createFiber =>  new FiberNode


ReactRoot.prototype.render
```
ReactRoot.prototype.render = function (children, callback) {
  var root = this._internalRoot;
  var work = new ReactWork();
  callback = callback === undefined ? null : callback;
  {
    warnOnInvalidCallback(callback, 'render');
  }
  if (callback !== null) {
    work.then(callback);
  }
  updateContainer(children, root, null, work._onCommit);
  return work;
};
```

ReactDOM.render调用栈</br>
![avatar](../../images/react/reactdom-render-running-stack.png)